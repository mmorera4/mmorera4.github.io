
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SVG Audio Visualizer</title>
    <style>
    .two {
        transition: all 2s ease-in-out 0.5s;
        -webkit-transition: all 2s ease-in-out 0.5s;
    }
    
    #scale {
        height: 150px;
        width: 100px;
        text-align: center;
        margin: 0 auto;
    }
    
    #scale {
        border: 1px blue solid;
    }
    
    .grow {
        transform: scale(2);
        -ms-transform: scale(2);
        -webkit-transform: scale(2);
    }

        body {
            font-family: Arial, sans-serif;
            text-align: center;
            background-color: #1a1a1a;
            color: #fff;
        }
        svg {
            display: block;
            margin: 20px auto;
            background-color: #000;
        }
        .controls {
            margin: 20px;
        }
    </style>
</head>
<body>
    <h1>SVG Audio Visualizer</h1>
    <div class="controls">
        <input type="file" id="audioFile" accept="audio/*">
        <br><br>
        <audio id="audioPlayer" controls></audio>
        <br><br>
        <label for="shapeSelect">Choose Shape:</label>
        <select id="shapeSelect">
            <option value="circle">Circle</option>
            <option value="heart">Heart</option>
            <option value="crescent">Crescent Moon</option>
            <option value="waning">Waning Moon</option>
        </select>
    </div>

    <svg id="svgVisualizer" width="400" height="400" viewBox="0 0 100 100">
        <circle id="circle" cx="50" cy="50" r="25" fill="hsl(200, 100%, 50%)" />
        <path id="heart" class="grow" d="M111,51.375 C105,54.041666666666664,99,56.708333333333336,93,59.375 C89.33333333333333,62.125,85.66666666666667,64.875,82,67.625 C79.66666666666667,70.54166666666667,77.33333333333333,73.45833333333333,75,76.375 C73.75,80.45833333333333,72.5,84.54166666666667,71.25,88.625 C70.75,93.70833333333333,70.25,98.79166666666667,69.75,103.875 C70.91666666666667,109.45833333333333,72.08333333333333,115.04166666666667,73.25,120.625 C77.08333333333333,125.125,80.91666666666667,129.625,84.75,134.125 C91,138.625,97.25,143.125,103.5,147.625 C98.33333333333333,147.20833333333334,93.16666666666667,146.79166666666666,88,146.375 C80.66666666666667,142.875,73.33333333333333,139.375,66,135.875 C62.166666666666664,132.375,58.333333333333336,128.875,54.5,125.375 C52.5,119.95833333333333,50.5,114.54166666666667,48.5,109.125 C48.583333333333336,102.20833333333333,48.666666666666664,95.29166666666667,48.75,88.375 C49.666666666666664,85.375,50.583333333333336,82.375,51.5,79.375 C53.833333333333336,75.45833333333333,56.166666666666664,71.54166666666667,58.5,67.625 C62.916666666666664,63.375,67.33333333333333,59.125,71.75,54.875 Q74.75,53.375,77.75,51.875 C82.16666666666667,50.875,86.58333333333333,49.875,91,48.875 C95.33333333333333,49.791666666666664,99.66666666666667,50.708333333333336,104,51.625 L108,54.875
M202.75,50.375 C198.25,51.208333333333336,193.75,52.041666666666664,189.25,52.875 C184.83333333333334,55.375,180.41666666666666,57.875,176,60.375 C172.41666666666666,63.375,168.83333333333334,66.375,165.25,69.375 C162.5,73.875,159.75,78.375,157,82.875 C155.83333333333334,89.375,154.66666666666666,95.875,153.5,102.375 C154.83333333333334,109.04166666666667,156.16666666666666,115.70833333333333,157.5,122.375 C161,127.20833333333333,164.5,132.04166666666666,168,136.875 Q170.75,138.875,173.5,140.875 C179,142.95833333333334,184.5,145.04166666666666,190,147.125 C193.91666666666666,147.79166666666666,197.83333333333334,148.45833333333334,201.75,149.125 Q206.375,148.875,211,148.625 C213.91666666666666,147.79166666666666,216.83333333333334,146.95833333333334,219.75,146.125 C222.83333333333334,144.375,225.91666666666666,142.625,229,140.875 C233.66666666666666,136.45833333333334,238.33333333333334,132.04166666666666,243,127.625 C245.33333333333334,123.04166666666667,247.66666666666666,118.45833333333333,250,113.875 C251,110.625,252,107.375,253,104.125 C253.25,100.95833333333333,253.5,97.79166666666667,253.75,94.625 Q253.125,91.25,252.5,87.875 C250.5,83.45833333333333,248.5,79.04166666666667,246.5,74.625 C241.91666666666666,69.29166666666667,237.33333333333334,63.958333333333336,232.75,58.625 C228.41666666666666,56.541666666666664,224.08333333333334,54.458333333333336,219.75,52.375 L198.5,50.875
M317.5,56.875 C312.75,62.375,308,67.875,303.25,73.375 C301.5833333333333,78.29166666666667,299.9166666666667,83.20833333333333,298.25,88.125 C298.9166666666667,94.54166666666667,299.5833333333333,100.95833333333333,300.25,107.375 C301.8333333333333,111.04166666666667,303.4166666666667,114.70833333333333,305,118.375 C306.9166666666667,121.125,308.8333333333333,123.875,310.75,126.625 C315.5,130.125,320.25,133.625,325,137.125 C329.5833333333333,138.54166666666666,334.1666666666667,139.95833333333334,338.75,141.375 C344.3333333333333,141.04166666666666,349.9166666666667,140.70833333333334,355.5,140.375 C361.75,137.875,368,135.375,374.25,132.875 C376.5833333333333,131.20833333333334,378.9166666666667,129.54166666666666,381.25,127.875 Q381.75,127.25,382.25,126.625 C374.0833333333333,128.375,365.9166666666667,130.125,357.75,131.875 C353.75,131.875,349.75,131.875,345.75,131.875 C341,129.95833333333334,336.25,128.04166666666666,331.5,126.125 C328.75,124.04166666666667,326,121.95833333333333,323.25,119.875 C320.25,114.95833333333333,317.25,110.04166666666667,314.25,105.125 C313.25,100.875,312.25,96.625,311.25,92.375 C311.5833333333333,87.54166666666667,311.9166666666667,82.70833333333333,312.25,77.875 L317.25,59.125
M429.75,58.375 C432.75,59.958333333333336,435.75,61.541666666666664,438.75,63.125 C441.75,65.79166666666667,444.75,68.45833333333333,447.75,71.125 C450.8333333333333,78.95833333333333,453.9166666666667,86.79166666666667,457,94.625 C457.1666666666667,98.625,457.3333333333333,102.625,457.5,106.625 C456,110.45833333333333,454.5,114.29166666666667,453,118.125 C450.5,122.125,448,126.125,445.5,130.125 C440,135.375,434.5,140.625,429,145.875 C431.75,146.79166666666666,434.5,147.70833333333334,437.25,148.625 C440.5833333333333,148.625,443.9166666666667,148.625,447.25,148.625 C452.5,146.375,457.75,144.125,463,141.875 C470.4166666666667,135.20833333333334,477.8333333333333,128.54166666666666,485.25,121.875 C486.8333333333333,117.125,488.4166666666667,112.375,490,107.625 C490,100.45833333333333,490,93.29166666666667,490,86.125 C488.0833333333333,81.04166666666667,486.1666666666667,75.95833333333333,484.25,70.875 C482.5,68.79166666666667,480.75,66.70833333333333,479,64.625 C476.6666666666667,62.958333333333336,474.3333333333333,61.291666666666664,472,59.625 C468.9166666666667,58.541666666666664,465.8333333333333,57.458333333333336,462.75,56.375 C457.25,55.541666666666664,451.75,54.708333333333336,446.25,53.875 C443,54.125,439.75,54.375,436.5,54.625 L430.75,57.875
M535.5,72.125 Q534.125,74.875,532.75,77.625 C538.25,72.54166666666667,543.75,67.45833333333333,549.25,62.375 C554,60.708333333333336,558.75,59.041666666666664,563.5,57.375 C570.5,57.375,577.5,57.375,584.5,57.375 Q588.5,58,592.5,58.625 Q595.125,60,597.75,61.375 C601.6666666666666,65.70833333333333,605.5833333333334,70.04166666666667,609.5,74.375 C612.0833333333334,80.95833333333333,614.6666666666666,87.54166666666667,617.25,94.125 C617.9166666666666,100.54166666666667,618.5833333333334,106.95833333333333,619.25,113.375 C618.5,117.54166666666667,617.75,121.70833333333333,617,125.875 Q615.5,128.875,614,131.875 C612.25,133.95833333333334,610.5,136.04166666666666,608.75,138.125 C605.9166666666666,140.04166666666666,603.0833333333334,141.95833333333334,600.25,143.875 C602.5833333333334,136.04166666666666,604.9166666666666,128.20833333333334,607.25,120.375 C607.3333333333334,116.45833333333333,607.4166666666666,112.54166666666667,607.5,108.625 C606.1666666666666,104.54166666666667,604.8333333333334,100.45833333333333,603.5,96.375 C599.25,91.95833333333333,595,87.54166666666667,590.75,83.125 C585.5833333333334,80.45833333333333,580.4166666666666,77.79166666666667,575.25,75.125 C572.4166666666666,74.375,569.5833333333334,73.625,566.75,72.875 C562.6666666666666,72.95833333333333,558.5833333333334,73.04166666666667,554.5,73.125 L535.5,78.625
M683.75,58.375 C681.1666666666666,60.541666666666664,678.5833333333334,62.708333333333336,676,64.875 C674.25,67.375,672.5,69.875,670.75,72.375 C669.1666666666666,75.54166666666667,667.5833333333334,78.70833333333333,666,81.875 C665.0833333333334,85.95833333333333,664.1666666666666,90.04166666666667,663.25,94.125 C664.25,99.95833333333333,665.25,105.79166666666667,666.25,111.625 C669.0833333333334,117.375,671.9166666666666,123.125,674.75,128.875 C679.0833333333334,133.29166666666666,683.4166666666666,137.70833333333334,687.75,142.125 C692.0833333333334,143.875,696.4166666666666,145.625,700.75,147.375 C704.25,147.375,707.75,147.375,711.25,147.375 C716.6666666666666,146.04166666666666,722.0833333333334,144.70833333333334,727.5,143.375 C732.75,140.875,738,138.375,743.25,135.875 C745.3333333333334,133.125,747.4166666666666,130.375,749.5,127.625 C741.25,129.79166666666666,733,131.95833333333334,724.75,134.125 C720.9166666666666,134.20833333333334,717.0833333333334,134.29166666666666,713.25,134.375 Q709.5,133.5,705.75,132.625 C703.25,131.29166666666666,700.75,129.95833333333334,698.25,128.625 C694.5833333333334,124.95833333333333,690.9166666666666,121.29166666666667,687.25,117.625 C684.5833333333334,112.875,681.9166666666666,108.125,679.25,103.375 C678.4166666666666,99.79166666666667,677.5833333333334,96.20833333333333,676.75,92.625 C676.8333333333334,87.79166666666667,676.9166666666666,82.95833333333333,677,78.125 L682.5,61.625
M794,117.125 C796.5,111.29166666666667,799,105.45833333333333,801.5,99.625 C804.1666666666666,96.875,806.8333333333334,94.125,809.5,91.375 C812.4166666666666,89.625,815.3333333333334,87.875,818.25,86.125 C825.5,84.875,832.75,83.625,840,82.375 C845.9166666666666,84.20833333333333,851.8333333333334,86.04166666666667,857.75,87.875 C860.8333333333334,89.79166666666667,863.9166666666666,91.70833333333333,867,93.625 C868.5,95.70833333333333,870,97.79166666666667,871.5,99.875 C873.1666666666666,105.375,874.8333333333334,110.875,876.5,116.375 Q877.25,116.75,878,117.125 Q879.125,115.625,880.25,114.125 C881,109.875,881.75,105.625,882.5,101.375 C882,97.375,881.5,93.375,881,89.375 C879.25,85.70833333333333,877.5,82.04166666666667,875.75,78.375 C873.9166666666666,76.125,872.0833333333334,73.875,870.25,71.625 C865.5,68.70833333333333,860.75,65.79166666666667,856,62.875 C851.4166666666666,62.541666666666664,846.8333333333334,62.208333333333336,842.25,61.875 C834,63.375,825.75,64.875,817.5,66.375 C815.0833333333334,67.375,812.6666666666666,68.375,810.25,69.375 C807.5833333333334,71.375,804.9166666666666,73.375,802.25,75.375 C800.1666666666666,77.79166666666667,798.0833333333334,80.20833333333333,796,82.625 C793.8333333333334,86.45833333333333,791.6666666666666,90.29166666666667,789.5,94.125 Q788.875,96.375,788.25,98.625 C788.4166666666666,102.04166666666667,788.5833333333334,105.45833333333333,788.75,108.875 C789.0833333333334,112.125,789.4166666666666,115.375,789.75,118.625 Q790.875,121.25,792,123.875 L794.25,118.375
M919.5,62.375 C923.3333333333334,64.29166666666667,927.1666666666666,66.20833333333333,931,68.125 C936.5,72.04166666666667,942,75.95833333333333,947.5,79.875 C949.0833333333334,82.20833333333333,950.6666666666666,84.54166666666667,952.25,86.875 C953.4166666666666,90.04166666666667,954.5833333333334,93.20833333333333,955.75,96.375 C956,101.79166666666667,956.25,107.20833333333333,956.5,112.625 C955.75,115.79166666666667,955,118.95833333333333,954.25,122.125 C949.5833333333334,127.875,944.9166666666666,133.625,940.25,139.375 C934.5833333333334,143.625,928.9166666666666,147.875,923.25,152.125 Q926.375,153.25,929.5,154.375 Q933.625,154.375,937.75,154.375 C940.4166666666666,153.54166666666666,943.0833333333334,152.70833333333334,945.75,151.875 C948,150.375,950.25,148.875,952.5,147.375 C954.8333333333334,145.20833333333334,957.1666666666666,143.04166666666666,959.5,140.875 C961.8333333333334,137.54166666666666,964.1666666666666,134.20833333333334,966.5,130.875 C969.1666666666666,124.875,971.8333333333334,118.875,974.5,112.875 C974.6666666666666,104.125,974.8333333333334,95.375,975,86.625 C974.1666666666666,84.04166666666667,973.3333333333334,81.45833333333333,972.5,78.875 C971.0833333333334,76.70833333333333,969.6666666666666,74.54166666666667,968.25,72.375 C966.5,70.54166666666667,964.75,68.70833333333333,963,66.875 C960.1666666666666,65.04166666666667,957.3333333333334,63.208333333333336,954.5,61.375 C951.6666666666666,60.458333333333336,948.8333333333334,59.541666666666664,946,58.625 C942.25,58.291666666666664,938.5,57.958333333333336,934.75,57.625 L921.75,61.875
M989.25,61.875 C987,63.208333333333336,984.75,64.54166666666667,982.5,65.875 Q980.875,68.25,979.25,70.625 C979.1666666666666,74.70833333333333,979.0833333333334,78.79166666666667,979,82.875 C980.9166666666666,85.04166666666667,982.8333333333334,87.20833333333333,984.75,89.375 C988.5833333333334,89.45833333333333,992.4166666666666,89.54166666666667,996.25,89.625 Q998.875,88.375,1001.5,87.125 Q1002.875,85.5,1004.25,83.875 C1004,79.45833333333333,1003.75,75.04166666666667,1003.5,70.625 C1001.5833333333334,68.20833333333333,999.6666666666666,65.79166666666667,997.75,63.375 Q995,62.875,992.25,62.375 L988.25,63.625" fill="hsl(200, 100%, 50%)" style="display:none;" />
        
        <path id="crescent" d="M36.5,11.2c0-6.4,5.2-11.4,11.4-11.4c6.4,0,11.4,5.2,11.4,11.4c0,6.4-5.2,11.4-11.4,11.4S36.5,17.4,36.5,11.2z M54.1,24.9
	c-2.9-1.6-6.6-0.5-8.2,2.4l-3.2,5.8c-0.4-3-1.2-5.8-1.9-7c-1.6-3.3-3.7-4.6-3.7-4.6c-11.2-6.4-17.2,5.4-17.3,5.8
	c-1.1,2.6-2.6,6.9-2.5,15.3c0.4,19.2,11.5,45.1,11.5,45.1H7.3C3.4,87.7,0,90,0,94.2c0,3.7,3.2,6,7,6h29.9c4.5,0,7.9-2.5,8.1-11
	l0.3-35.5l11.4-20.8C58.1,30,57,26.4,54.1,24.9z" fill="hsl(200, 100%, 50%)" style="display:none;" />
        
       
        <path id="waning" d="M35,19L 41,19L 41,30L 52,30L 52,36L 41,36L 41,57L 35,57L 35,36L 24,36L 24,30L 35,30L 35,19 Z" fill="hsl(200, 100%, 50%)" style="display:none;" />
    </svg>

    <script>
        const fileInput = document.getElementById('audioFile');
        const audioPlayer = document.getElementById('audioPlayer');
        const shapeSelect = document.getElementById('shapeSelect');
        const svgVisualizer = document.getElementById('svgVisualizer');
        const shapes = {
            circle: document.getElementById('circle'),
            heart: document.getElementById('heart'),
            crescent: document.getElementById('crescent'),
            waning: document.getElementById('waning')
        };

        let audioContext, analyser, source, frequencyData;
        let animationFrameId;

        fileInput.addEventListener('change', handleFileUpload);
        shapeSelect.addEventListener('change', updateShapeVisibility);

        function handleFileUpload(event) {
            const file = event.target.files[0];
            if (file && file.type.startsWith('audio/')) {
                const audioURL = URL.createObjectURL(file);
                audioPlayer.src = audioURL;
                audioPlayer.load();
                initAudio(audioURL);
            } else {
                alert('Please upload a valid audio file.');
            }
        }

        function initAudio(audioURL) {
            audioContext = new (window.AudioContext || window.webkitAudioContext)();
            analyser = audioContext.createAnalyser();
            analyser.fftSize = 256;
            const bufferLength = analyser.frequencyBinCount;
            frequencyData = new Uint8Array(bufferLength);

            source = audioContext.createMediaElementSource(audioPlayer);
            source.connect(analyser);
            analyser.connect(audioContext.destination);

            visualize();
        }

        function visualize() {
            animationFrameId = requestAnimationFrame(visualize);
            analyser.getByteFrequencyData(frequencyData);

            const averageFrequency = frequencyData.reduce((a, b) => a + b) / frequencyData.length;
            const scale = 0.5 + (averageFrequency / 255) * 1.5; // Scale between 0.5 and 2
            const hue = Math.round((averageFrequency / 255) * 360);

            const selectedShape = shapes[shapeSelect.value];
            selectedShape.setAttribute('fill', `hsl(${hue}, 100%, 50%)`);

            if (shapeSelect.value === 'circle') {
                selectedShape.setAttribute('r', 25 * scale);
            } else {
                selectedShape.setAttribute('transform', `scale(${scale}) translate(${50 - 50 * scale}, ${50 - 50 * scale})`);
            }
        }

        function updateShapeVisibility() {
            Object.values(shapes).forEach(shape => shape.style.display = 'none');
            shapes[shapeSelect.value].style.display = 'block';
        }

        audioPlayer.addEventListener('play', () => {
            if (audioContext && audioContext.state === 'suspended') {
                audioContext.resume();
            }
        });
    </script>
</body>
</html>
